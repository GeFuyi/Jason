{"ast":null,"code":"import { ref, onMounted } from 'vue';\nimport axios from 'axios';\nexport default {\n  name: 'UserList',\n  setup() {\n    const criteria = ref({\n      username: '',\n      email: '',\n      age: '',\n      gender: ''\n    });\n    const usernameList = ref([]);\n    const emailList = ref([]);\n    const ageList = ref([]);\n    const genderList = ref([true, false]);\n    const pagedUsers = ref([]);\n    const page = ref(1);\n    const pageSize = ref(10);\n    const totalPages = ref(1);\n\n    // ---------- 获取下拉选项 ----------\n    const fetchOptions = async () => {\n      try {\n        const [uRes, eRes, aRes] = await Promise.all([axios.get('/user/options/username'), axios.get('/user/options/email'), axios.get('/user/options/age')]);\n        usernameList.value = uRes.data;\n        emailList.value = eRes.data;\n        ageList.value = aRes.data;\n        // genderList 固定 [true,false]\n      } catch (err) {\n        alert('获取下拉选项失败: ' + err);\n      }\n    };\n\n    // ---------- 查询用户 ----------\n    const fetchUsers = async () => {\n      try {\n        const params = {\n          username: criteria.value.username,\n          email: criteria.value.email,\n          age: criteria.value.age,\n          gender: criteria.value.gender,\n          page: page.value,\n          pageSize: pageSize.value\n        };\n        const res = await axios.get('/user/query', {\n          params\n        });\n        pagedUsers.value = res.data.data;\n        totalPages.value = Math.ceil(res.data.total / pageSize.value);\n      } catch (err) {\n        alert('查询用户失败: ' + err);\n      }\n    };\n    const changePage = p => {\n      if (p < 1 || p > totalPages.value) return;\n      page.value = p;\n      fetchUsers();\n    };\n    onMounted(async () => {\n      await fetchOptions();\n      await fetchUsers();\n    });\n    return {\n      criteria,\n      usernameList,\n      emailList,\n      ageList,\n      genderList,\n      pagedUsers,\n      page,\n      pageSize,\n      totalPages,\n      fetchUsers,\n      changePage\n    };\n  }\n};","map":{"version":3,"names":["ref","onMounted","axios","name","setup","criteria","username","email","age","gender","usernameList","emailList","ageList","genderList","pagedUsers","page","pageSize","totalPages","fetchOptions","uRes","eRes","aRes","Promise","all","get","value","data","err","alert","fetchUsers","params","res","Math","ceil","total","changePage","p"],"sources":["D:\\Final\\springboot_egg\\egg-web\\src\\user\\UserList.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <h2>用户列表</h2>\r\n\r\n    <!-- 条件筛选 -->\r\n    <div class=\"filters\">\r\n      <select v-model=\"criteria.username\">\r\n        <option value=\"\">全部用户名</option>\r\n        <option v-for=\"u in usernameList\" :key=\"u\" :value=\"u\">{{ u }}</option>\r\n      </select>\r\n\r\n      <select v-model=\"criteria.email\">\r\n        <option value=\"\">全部邮箱</option>\r\n        <option v-for=\"e in emailList\" :key=\"e\" :value=\"e\">{{ e }}</option>\r\n      </select>\r\n\r\n      <select v-model=\"criteria.age\">\r\n        <option value=\"\">全部年龄</option>\r\n        <option v-for=\"a in ageList\" :key=\"a\" :value=\"a\">{{ a }}</option>\r\n      </select>\r\n\r\n      <select v-model=\"criteria.gender\">\r\n        <option value=\"\">全部性别</option>\r\n        <option v-for=\"g in genderList\" :key=\"g\" :value=\"g\">{{ g ? '男' : '女' }}</option>\r\n      </select>\r\n\r\n      <button @click=\"fetchUsers\">查询</button>\r\n    </div>\r\n\r\n    <!-- 用户表 -->\r\n    <table>\r\n      <thead>\r\n      <tr>\r\n        <th>ID</th>\r\n        <th>用户名</th>\r\n        <th>邮箱</th>\r\n        <th>年龄</th>\r\n        <th>性别</th>\r\n      </tr>\r\n      </thead>\r\n      <tbody>\r\n      <tr v-for=\"user in pagedUsers\" :key=\"user.id\">\r\n        <td>{{ user.id }}</td>\r\n        <td>{{ user.username }}</td>\r\n        <td>{{ user.email }}</td>\r\n        <td>{{ user.age }}</td>\r\n        <td>{{ user.gender ? '男' : '女' }}</td>\r\n      </tr>\r\n      </tbody>\r\n    </table>\r\n\r\n    <!-- 分页 -->\r\n    <div class=\"pagination\">\r\n      <button @click=\"changePage(page - 1)\" :disabled=\"page === 1\">上一页</button>\r\n      <span>{{ page }} / {{ totalPages }}</span>\r\n      <button @click=\"changePage(page + 1)\" :disabled=\"page === totalPages\">下一页</button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, onMounted } from 'vue';\r\nimport axios from 'axios';\r\n\r\nexport default {\r\n  name: 'UserList',\r\n  setup() {\r\n    const criteria = ref({\r\n      username: '',\r\n      email: '',\r\n      age: '',\r\n      gender: ''\r\n    });\r\n\r\n    const usernameList = ref([]);\r\n    const emailList = ref([]);\r\n    const ageList = ref([]);\r\n    const genderList = ref([true, false]);\r\n\r\n    const pagedUsers = ref([]);\r\n    const page = ref(1);\r\n    const pageSize = ref(10);\r\n    const totalPages = ref(1);\r\n\r\n    // ---------- 获取下拉选项 ----------\r\n    const fetchOptions = async () => {\r\n      try {\r\n        const [uRes, eRes, aRes] = await Promise.all([\r\n          axios.get('/user/options/username'),\r\n          axios.get('/user/options/email'),\r\n          axios.get('/user/options/age')\r\n        ]);\r\n        usernameList.value = uRes.data;\r\n        emailList.value = eRes.data;\r\n        ageList.value = aRes.data;\r\n        // genderList 固定 [true,false]\r\n      } catch (err) {\r\n        alert('获取下拉选项失败: ' + err);\r\n      }\r\n    };\r\n\r\n    // ---------- 查询用户 ----------\r\n    const fetchUsers = async () => {\r\n      try {\r\n        const params = {\r\n          username: criteria.value.username,\r\n          email: criteria.value.email,\r\n          age: criteria.value.age,\r\n          gender: criteria.value.gender,\r\n          page: page.value,\r\n          pageSize: pageSize.value\r\n        };\r\n        const res = await axios.get('/user/query', { params });\r\n        pagedUsers.value = res.data.data;\r\n        totalPages.value = Math.ceil(res.data.total / pageSize.value);\r\n      } catch (err) {\r\n        alert('查询用户失败: ' + err);\r\n      }\r\n    };\r\n\r\n    const changePage = (p) => {\r\n      if (p < 1 || p > totalPages.value) return;\r\n      page.value = p;\r\n      fetchUsers();\r\n    };\r\n\r\n    onMounted(async () => {\r\n      await fetchOptions();\r\n      await fetchUsers();\r\n    });\r\n\r\n    return {\r\n      criteria,\r\n      usernameList,\r\n      emailList,\r\n      ageList,\r\n      genderList,\r\n      pagedUsers,\r\n      page,\r\n      pageSize,\r\n      totalPages,\r\n      fetchUsers,\r\n      changePage\r\n    };\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n/* 可根据需要自行美化 */\r\n.filters select {\r\n  margin-right: 10px;\r\n}\r\n.pagination {\r\n  margin-top: 10px;\r\n}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}