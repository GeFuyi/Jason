{"ast":null,"code":"import SockJS from 'sockjs-client';\nimport Stomp from 'stompjs';\nlet stompClient = null;\nexport function connect(userId, onMessageReceived) {\n  const socket = new SockJS('http://localhost:8080/ws-chat');\n  stompClient = Stomp.over(socket);\n  stompClient.connect({}, () => {\n    // 订阅群聊\n    stompClient.subscribe('/topic/group', msg => onMessageReceived(JSON.parse(msg.body)));\n    // 订阅私聊\n    stompClient.subscribe(`/user/${userId}/queue/private`, msg => onMessageReceived(JSON.parse(msg.body)));\n  });\n}\nexport function sendMessage(fromUserId, toUserId, content) {\n  stompClient.send(\"/app/chat.send\", {}, JSON.stringify({\n    fromUserId,\n    toUserId,\n    content\n  }));\n}","map":{"version":3,"names":["SockJS","Stomp","stompClient","connect","userId","onMessageReceived","socket","over","subscribe","msg","JSON","parse","body","sendMessage","fromUserId","toUserId","content","send","stringify"],"sources":["D:/Final/springboot_egg/egg-web/src/utils/chat.js"],"sourcesContent":["import SockJS from 'sockjs-client';\r\nimport Stomp from 'stompjs';\r\n\r\nlet stompClient = null;\r\n\r\nexport function connect(userId, onMessageReceived) {\r\n    const socket = new SockJS('http://localhost:8080/ws-chat');\r\n    stompClient = Stomp.over(socket);\r\n    stompClient.connect({}, () => {\r\n        // 订阅群聊\r\n        stompClient.subscribe('/topic/group', msg => onMessageReceived(JSON.parse(msg.body)));\r\n        // 订阅私聊\r\n        stompClient.subscribe(`/user/${userId}/queue/private`, msg => onMessageReceived(JSON.parse(msg.body)));\r\n    });\r\n}\r\n\r\nexport function sendMessage(fromUserId, toUserId, content) {\r\n    stompClient.send(\"/app/chat.send\", {}, JSON.stringify({fromUserId, toUserId, content}));\r\n}\r\n"],"mappings":"AAAA,OAAOA,MAAM,MAAM,eAAe;AAClC,OAAOC,KAAK,MAAM,SAAS;AAE3B,IAAIC,WAAW,GAAG,IAAI;AAEtB,OAAO,SAASC,OAAOA,CAACC,MAAM,EAAEC,iBAAiB,EAAE;EAC/C,MAAMC,MAAM,GAAG,IAAIN,MAAM,CAAC,+BAA+B,CAAC;EAC1DE,WAAW,GAAGD,KAAK,CAACM,IAAI,CAACD,MAAM,CAAC;EAChCJ,WAAW,CAACC,OAAO,CAAC,CAAC,CAAC,EAAE,MAAM;IAC1B;IACAD,WAAW,CAACM,SAAS,CAAC,cAAc,EAAEC,GAAG,IAAIJ,iBAAiB,CAACK,IAAI,CAACC,KAAK,CAACF,GAAG,CAACG,IAAI,CAAC,CAAC,CAAC;IACrF;IACAV,WAAW,CAACM,SAAS,CAAC,SAASJ,MAAM,gBAAgB,EAAEK,GAAG,IAAIJ,iBAAiB,CAACK,IAAI,CAACC,KAAK,CAACF,GAAG,CAACG,IAAI,CAAC,CAAC,CAAC;EAC1G,CAAC,CAAC;AACN;AAEA,OAAO,SAASC,WAAWA,CAACC,UAAU,EAAEC,QAAQ,EAAEC,OAAO,EAAE;EACvDd,WAAW,CAACe,IAAI,CAAC,gBAAgB,EAAE,CAAC,CAAC,EAAEP,IAAI,CAACQ,SAAS,CAAC;IAACJ,UAAU;IAAEC,QAAQ;IAAEC;EAAO,CAAC,CAAC,CAAC;AAC3F","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}